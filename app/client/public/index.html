<!DOCTYPE html>
<html class="js" lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="ImageToolbar" content="false" />
    <meta http-equiv="cleartype" content="on" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="HandheldFriendly" content="true" />
    <link
      rel="shortcut icon"
      href="https://www.epa.gov/sites/all/themes/epa/favicon.ico"
      type="image/vnd.microsoft.icon"
    />
    <meta name="MobileOptimized" content="width" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!--googleon: all-->
    <meta name="DC.title" content="WaterWeather?" />
    <!--googleoff: snippet-->
    <meta
      name="keywords"
      content="Clean Water Act (CWA), Safe Drinking Water Act (SDWA), pollution, impaired waterbodies"
    />
    <link rel="canonical" href="" />
    <link rel="shortlink" href="" />
    <meta name="DC.language" content="en" />
    <meta name="DC.Subject.epachannel" content="Learn the Issues" />
    <meta name="DC.type" content="Data and Tools" />
    <meta name="DC.creator" content="US EPA" />
    <meta name="theme-color" content="#0071bc" />
    <title>How’s My Waterway? | US EPA</title>
    <link
      rel="manifest"
      href="%PUBLIC_URL%/site.webmanifest"
      crossorigin="use-credentials"
    />
    <!--googleoff: all-->
    <link
      rel="stylesheet"
      href="https://www.epa.gov/sites/all/libraries/standalone/css/core/style.css"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Slab|Source+Sans+Pro:700i&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://js.arcgis.com/4.22/esri/css/main.css"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
      integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ"
      crossorigin="anonymous"
    />

    <!-- icons -->
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="%PUBLIC_URL%/apple-touch-icon.png"
    />
    <link rel="manifest" href="%PUBLIC_URL%/site.webmanifest" />
    <link
      rel="mask-icon"
      href="%PUBLIC_URL%/safari-pinned-tab.svg"
      color="#ffffff"
    />
    <meta name="msapplication-TileColor" content="#2b5797" />
    <style>
      /* bootstrap style overrides */
      .epa-search .form-text {
        display: inline-block;
        margin-top: 0;
      }

      /* epa template overrides */
      .main-footer .region-footer .row {
        margin: 0;
      }

      .main-footer .region-footer .col:first-of-type {
        padding-left: 0;
      }

      .main-footer .region-footer .col:last-of-type {
        padding-right: 0;
      }

      .unsupportedMessageContainer {
        position: -webkit-sticky; /* Safari */
        position: sticky;
        top: 0;
        z-index: 900;
      }

      .unsupportedErrorBox {
        padding: 1rem;
        text-align: center;
        border-color: #f5c6cb;
        color: #721c24;
        background-color: #f8d7da;
      }

      .unsupportedMessage {
        margin-right: 1rem;
      }

      .unsupportedCloseButton {
        position: absolute;
        top: 0;
        right: 0;
        padding: 0;
        border: none;
        border-radius: 0;
        width: 1.5rem;
        height: 1.5rem;
        color: white;
        background-color: rgba(0, 0, 0, 0.5);
      }

      @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
        /* IE10 and IE11 styles */
        .unsupportedMessageContainer {
          display: block;
        }
      }
    </style>
    <!-- IE9 and below styles -->
    <!--[if IE]>
      <style>
        .unsupportedMessageContainer {
          display: block;
        }
      </style>
    <![endif]-->
    <!-- Set page title dynamically -->
    <script>
      // map pathnames to a formatted title for SEO purposes
      const pathnameMapping = {
        default: "WaterWeather - Home",
        community: "WaterWeather - Community",
        'state-and-tribal': "WaterWeather - State and Tribal",
        state: "WaterWeather - State",
        tribe: "WaterWeather - Tribe",
        national: "WaterWeather - National",
        'waterbody-report': "WaterWeather - Waterbody Report",
        'plan-summary': "WaterWeather - Plan Summary",
        data: "WaterWeather - Data",
        about: "WaterWeather - About",
        swimming: "WaterWeather - Explore - Swimming",
        'eating-fish': "WaterWeather - Explore - Eating Fish",
        'aquatic-life': "WaterWeather - Explore - Aquatic Life",
        'drinking-water': "WaterWeather - Explore - Drinking Water",
        attains: "WaterWeather - ATTAINS",
        educators: "WaterWeather - Educators",
        'monitoring-report': "WaterWeather - Water Monitoring Report",
      };

      const descriptionMapping = {
        default:
          'An application for learning the condition of local streams, lakes and other waters anywhere in the US... quickly and in plain language.',
        community:
          'Enter a location to learn about water quality in your community. Explore information about local stream conditions, watershed protection, restoration, drinking water and whether your waterways are suitable for swimming or eating fish and aquatic life.',
        'state-and-tribal':
          'Choose a state, tribe, or territory to get the most recent information on water quality submitted to EPA, including success stories, documents, and links to organizational websites.',
        state:
          'Choose a state or territory to get the most recent information on water quality submitted to EPA, including success stories, documents, and links to organizational websites. Search for water conditions throughout your state with the advanced search tool.',
        tribe:
          'Choose a tribe to get the most recent information on water quality submitted to EPA, documents, and links to organizational websites.',
        national:
          'Explore information about overall water quality in the United State and the basics of EPA’s drinking water program.',
        'waterbody-report':
          'Use the waterbody report page to find information on individual waterbodies including uses, probable sources of impairments and plans to restore water quality. ',
        'plan-summary':
          'The restoration plan summary page includes basic plan information, submitted documents, impairments addressed, and waters covered. ',
        educators:
          'Find How’s My Waterway resources for educators including lesson plans and other materials.',
        'monitoring-report':
          'Use the water monitoring report page to find information on individual monitoring locations including historical data from the Water Quality Portal.',
      };

      // update page title and description using mapping
      function setPageTitle(pathnameMapping) {
        const pageTitle = window.location.pathname.split('/')[1];
        document.title = pathnameMapping[pageTitle] || pathnameMapping.default;

        // remove old description tags if necessary
        let oldDescTag = document.querySelector("[name='description']");
        if (oldDescTag) oldDescTag.remove();
        let oldDcDescTag = document.querySelector("[name='DC.description']");
        if (oldDcDescTag) oldDcDescTag.remove();

        // create description tags
        const descTag = document.createElement('meta');
        descTag.setAttribute('name', 'description');
        descTag.content =
          descriptionMapping[pageTitle] || descriptionMapping.default;
        document.getElementsByTagName('head')[0].appendChild(descTag);

        const dcDescTag = document.createElement('meta');
        dcDescTag.setAttribute('name', 'DC.description');
        dcDescTag.content =
          descriptionMapping[pageTitle] || descriptionMapping.default;
        document.getElementsByTagName('head')[0].appendChild(dcDescTag);
      }

      setPageTitle(pathnameMapping); // set page title when page loads

      // set page title when window location changes
      window.addEventListener('locationchange', function (event) {
        setPageTitle(pathnameMapping);
      });
    </script>
    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-L8ZB');
    </script>
    <!-- End Google Tag Manager -->
    <!-- Google Analytics -->
    <script>
      // Prevent scroll restoration. This is used to avoid issues with browsers
      // scrolling to odd positions after the page finishes loading
      history.scrollRestoration = 'manual';

      function addGoogleAnalyticsObject() {
        (function (i, s, o, g, r, a, m) {
          i['GoogleAnalyticsObject'] = r;
          (i[r] =
            i[r] ||
            function () {
              (i[r].q = i[r].q || []).push(arguments);
            }),
            (i[r].l = 1 * new Date());
          (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
          a.async = 1;
          a.src = g;
          m.parentNode.insertBefore(a, m);
        })(
          window,
          document,
          'script',
          '//www.google-analytics.com/analytics.js',
          'ga',
        );
      }

      // Wrapper for logging to GA which adds the target to the command
      function logToGa(command, ...props) {
        if (!window.ga) return;
        ga(`${window.gaTarget}.${command}`, ...props);
      }

      function logErrorToGa(err, fatal = false) {
        const error = new Error(err);
        window.logToGa('send', 'exception', {
          exDescription: `${error.name}:${error.message}:${error.stack}`,
          exFatal: fatal,
        });
      }

      // get origin for mapping proxy calls
      const loc = window.location;
      const origin =
        loc.hostname === 'localhost'
          ? `${loc.protocol}//${loc.hostname}:9091`
          : loc.origin;

      // initialize the googleAnalyticsMapping window object so the calls to get
      // the services lookup file are logged.
      window.googleAnalyticsMapping = [
        {
          wildcardUrl: `${origin}/proxy?url=${origin}/data/config/services.json`,
          name: 's3 lookup - config services',
        },
      ];

      //Only setup the logging for public sites, ie don't log from localhost
      window.gaTarget = '';
      if (
        window.location.hostname === 'mywaterway.epa.gov' ||
        window.location.hostname === 'mywaterway-prod.app.cloud.gov'
      ) {
        //EPA (Production) - Just initialize the HMW logs by setting gaTarget
        window.gaTarget = 'EPA';
      } else if (
        window.location.hostname === 'mywaterway-stage.app.cloud.gov'
      ) {
        addGoogleAnalyticsObject();
        ga('create', 'UA-37504877-4', 'auto', 'ERG'); //Stage
        window.gaTarget = 'ERG';
        logToGa('send', 'pageview');
      } else if (
        window.location.hostname === 'mywaterway-dev.app.cloud.gov' ||
        window.location.hostname === 'localhost'
      ) {
        addGoogleAnalyticsObject();
        ga('create', 'UA-37504877-3', 'auto', 'ERG'); //Dev
        window.gaTarget = 'ERG';
        logToGa('send', 'pageview');
      }

      //Only setup the logging for public sites, ie don't log from localhost
      if (gaTarget) {
        // create the locationChange event
        const locationChangeEvent = new Event('locationchange');

        // create the location change event listener
        window.addEventListener('locationchange', function (event) {
          logToGa('set', 'page', window.location.pathname);
          logToGa('send', 'pageview');
        });

        // Modify the pushState, replaceState and popState events so they
        // will trigger the locationchange event.
        const pushState = history.pushState;
        history.pushState = function () {
          pushState.apply(history, arguments);
          window.dispatchEvent(locationChangeEvent);
        };
        const replaceState = history.replaceState;
        history.replaceState = function () {
          replaceState.apply(this, arguments);
          window.dispatchEvent(locationChangeEvent);
        };
        window.addEventListener('popstate', function () {
          window.dispatchEvent(locationChangeEvent);
        });

        function wildcardIncludes(str, rule) {
          const escapeRegex = (str) =>
            str.replace(/([.*+?^=!:${}()|\]\\])/g, '\\$1');
          return new RegExp(
            '^' + rule.split('*').map(escapeRegex).join('.*') + '$',
          ).test(str);
        }

        window.addEventListener('click', function (event) {
          //Button clicks
          if (event.target.onclick && event.target.textContent) {
            const text = event.target.textContent.trim();
            const title = event.target.title.trim();

            //Log to Google Analytics
            const action = title
              ? 'ow-hmw2-' + text + ' - ' + title
              : 'ow-hmw2-' + text;
            logToGa(
              'send',
              'event',
              'buttonClick',
              action,
              window.location.pathname,
            );
          }

          //Link clicks
          if (
            event.target.tagName.toLowerCase() === 'a' &&
            event.target.target === '_blank'
          ) {
            const href = event.target.href;

            // combine the web service and map service mappings
            const mapping = window.googleAnalyticsMapping;
            let name = '';
            mapping.forEach((item) => {
              if (!name && wildcardIncludes(href, item.wildcardUrl)) {
                name = item.name;
              }
            });
            const action =
              'ow-hmw2-' + (name ? name : event.target.text.trim());

            const extension = href.split('.').pop;
            const category =
              window.location.hostname === event.target.hostname
                ? //Part of the HMW application
                  extension === '.pdf' || extension === '.zip'
                  ? 'Download'
                  : 'Internal'
                : 'External'; //External EPA Hyperlink

            //Log to Google Analytics
            logToGa('send', 'event', category, action, href);
          }
        });

        window.addEventListener('error', function (event) {
          if (
            event.message ===
              'ResizeObserver loop completed with undelivered notifications.' ||
            event.message === 'ResizeObserver loop limit exceeded'
          ) {
            event.stopImmediatePropagation();
            return;
          }
          window.logToGa('send', 'exception', {
            exDescription: event.error
              ? `${event.error.message}${event.error.stack}`
              : event.message,
            exFatal: true,
          });

          return true;
        });
      }
    </script>
    <!-- End Google Analytics-->
  </head>

  <body>
    <!-- Google Tag Manager -->
   
    <section
      class="clearfix"
      id="main-content"
      lang="en"
      role="main"
      tabindex="-1"
    >
      <noscript>You need to enable JavaScript to run this app.</noscript>
      <div id="unsupported-browser-message" class="unsupportedMessageContainer">
        <div class="unsupportedErrorBox">
          <div class="unsupportedMessage">
            <strong
              >You are using a browser that is not supported. WaterWeather
              works best on the latest versions of Chrome, Safari, Edge, or
              Firefox.</strong
            >
            <br />
            WaterWeather utilizes Esri's ArcGIS JavaScript API for advanced
            mapping features, which are not supported by this browser. For more
            information visit the following links:
            <a
              href="https://developers.arcgis.com/javascript/latest/system-requirements/#:~:text=Supported%20browsers&text=Firefox%2093%20or%20later,Safari%2014%20or%20later"
              >ArcGIS API for JavaScript System Requirements</a
            >
            and
            <a
              href="https://www.esri.com/arcgis-blog/products/arcgis/announcements/so-long-internet-explorer-11/"
              target="_blank"
              rel="noopener noreferrer"
              >So Long Internet Explorer</a
            >.
            <a
              class="exit-disclaimer"
              href="https://www.epa.gov/home/exit-epa"
              target="_blank"
              rel="noopener noreferrer"
            >
              EXIT
            </a>
          </div>
          <button
            class="unsupportedCloseButton"
            onClick="hideUnsupportedMessage();"
          >
            x
          </button>
        </div>
      </div>
      <div id="root" role="presentation"></div>
    </section>
  </body>
  <script>
    // This script is used for displaying a "browser unsupported" unsupported
    // message. This script is placed after the body to ensure the
    // div with the "unsupported-browser-message" id exists in the dom prior
    // to this script running.

    const unsupportedMessage = document.getElementById(
      'unsupported-browser-message',
    );

    // Allows the user to close the unsupported message
    function hideUnsupportedMessage() {
      unsupportedMessage.style.display = 'none';
    }

    // if fetch is supported, hide the unsupported browser message until
    // we can get the supported browsers lookup file
    if ('fetch' in window) {
      unsupportedMessage.style.display = 'none';
    }

    // parse the user agent string to determine which browser the user is using
    const { browserName, browserVersion } = (function () {
      const ua = navigator.userAgent;

      let item;
      let M =
        ua.match(
          /(opera|chrome|safari|firefox|edg|msie|trident(?=\/))\/?\s*(\d+)/i,
        ) || [];
      if (/trident/i.test(M[1])) {
        item = /\brv[ :]+(\d+)/g.exec(ua) || [];
        return {
          browserName: 'IE',
          browserVersion: parseInt(item[1]) || 0,
        };
      }
      if (M[1] === 'Chrome') {
        item = ua.match(/\b(Edg)\/(\d+)/);
        if (item != null) {
          item = item.slice(1);
          return {
            browserName: item[0].replace('Edg', 'Edge'),
            browserVersion: parseInt(item[1]) || 0,
          };
        }
      }

      M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];
      if ((item = ua.match(/version\/(\d+)/i)) != null) M.splice(1, 1, item[1]);

      return {
        browserName: M[0],
        browserVersion: parseInt(M[1]) || 0,
      };
    })();

    // fetch the supported browser list lookup file
    const proxyUrl = `${origin}/proxy`;
    const url = `${proxyUrl}?url=${origin}/data/config/supported-browsers.json`;
    fetch(url)
      .then((response) => {
        if (response.status === 200) {
          // parse the json
          response.json().then((json) => {
            let browserSupported = false;

            // determine if the user's browser is supported
            if (browserName === 'Chrome' && browserVersion >= json.chrome) {
              browserSupported = true;
            }
            if (browserName === 'Firefox' && browserVersion >= json.firefox) {
              browserSupported = true;
            }
            if (browserName === 'Safari' && browserVersion >= json.safari) {
              browserSupported = true;
            }
            if (browserName === 'Edge' && browserVersion >= json.edge) {
              browserSupported = true;
            }

            // hide/show the unsupported browser message
            unsupportedMessage.style.display = browserSupported
              ? 'none'
              : 'block';
          });
        } else {
          // show the unsupported browser message
          unsupportedMessage.style.display = 'block';
        }
      })
      .catch((err) => {
        console.error(err);

        // show the unsupported browser message
        unsupportedMessage.style.display = 'block';
      });
  </script>
</html>
